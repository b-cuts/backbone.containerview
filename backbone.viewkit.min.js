// Backbone.ViewKit 0.0.0
// (c) 2014 Greg MacWilliam
// Freely distributed under the MIT license

(function(){function a(a,b){if(f.isFunction(a.render)&&f.isFunction(a.remove)&&a.$el instanceof e)return!0;if(b)throw'Layout objects require "render" and "remove" methods';return!1}function b(a,b){return b?b instanceof e?b:a.$(b):a.$el}function c(a){this.$el=e(a).empty(),this.views=[]}var d=this.Backbone,e=this.jQuery||this.$,f=this._;c.prototype={views:null,view:null,models:null,filter:function(){return!0},sort:null,length:function(){return this.views.length},render:function(){this.empty();var b;return this.models&&f.isFunction(this.view)?(this.sort&&f.isFunction(this.sort)&&this.models.sort(this.sort),b=document.createDocumentFragment(),f.each(this.models,function(a,c){if(this.filter(a,c)){var d=new this.view({model:a});this.views.push(d),d.render(),b.appendChild(d.el)}},this)):a(this.view)&&(this.view.render(),this.views.push(this.view),b=this.view.$el),b&&this.$el.append(b),this},open:function(b,c){return c&&c instanceof d.Collection&&(c=c.models),this.models=c&&f.isArray(c)?c.slice():null,this.view=f.isFunction(b)||a(b,!0)?b:null,this.render()},append:function(a){return a.render(),this.views.push(a),this.$el.append(a.$el),this},empty:function(){return this.$el.empty(),f.invoke(this.views,"remove"),this.views.length=0,this},close:function(){return this.empty(),this.view=this.models=null,this},remove:function(){return this.close(),this.$el=null,this}};var g=d.ViewKit=d.View.extend({_vk:function(){return this.__vk||(this.__vk=[])},replaceSubview:function(a,c){return this.addLayout(a).render(),b(this,c).replaceWith(a.$el),a},appendSubview:function(a,c){return this.addLayout(a).render(),b(this,c).append(a.$el),a},createRegion:function(a){var c=b(this,a);return this.addLayout(g.createRegion(c))},addLayout:function(b){return a(b,!0)&&this._vk().push(b),b},removeLayout:function(a){var b=this._vk();if(a){var c=f.indexOf(b,a);f.isFunction(a.remove)&&a.remove(),c>=0&&b.splice(c,1)}else f.invoke(b,"remove"),b.length=0;return this},remove:function(){var a=d.View.prototype.remove.apply(this,arguments);return this.removeLayout(),a}});return g.createRegion=function(a){return new c(a)},g}).call(this);
//# sourceMappingURL=backbone.viewkit.min.map