// Backbone.ViewKit 0.0.0
// (c) 2014 Greg MacWilliam
// Freely distributed under the MIT license

(function(){function a(a){if("function"!=typeof a.render||"function"!=typeof a.remove)throw'Layout objects require "render" and "remove" methods';return!0}function b(a,b){return b?b instanceof g?b:a.$(b):a.$el}function c(a){this.$el=g(a).empty()}function d(a){this.$el=g(a).empty(),this.views=[]}function e(a,b){this.$el=g(a).empty(),this._s={},this.config(b)}var f=this.Backbone,g=this.jQuery||this.$,h=this._;c.prototype={state:null,view:null,open:function(b,c){return this.close(),this.state=c||null,a(b)&&(b.render(),this.view=b,this.$el.append(b.$el)),this},close:function(){return this.view&&(this.view.remove(),this.view=this.state=null),this},render:function(){return this.view&&this.view.render(),this},remove:function(){return this.close(),this.$el=null,this}},d.prototype={models:null,views:null,viewClass:null,filter:function(){return!0},sort:null,open:function(){},close:function(){return this.$el.empty(),h.invoke(this.views,"remove"),this.views.length=0,this},render:function(a,b,c){this.close();var d=document.createDocumentFragment();return h.isFunction(c)||(c=this.filter),a.each(function(a,e){if(c(a,e)){var f=new b({model:a});this.views.push(f),f.render(),d.appendChild(f.el)}},this),this.$el.append(d),this},append:function(a){return a.render(),this.views.push(a),this.$el.append(a.$el),this},remove:function(){return this.close(),this.$el=this.models=this.views=this.viewClass=null,this}},e.prototype={view:null,state:null,config:function(){},addState:function(a,b){this._s[a]=b,this.render()},state:function(a){return void 0!==a&&a!==this.state&&this._s[a]&&(this.state=a,this.render()),this.state},render:function(){this.empty(),this._s[this.state]&&(this.view=new this._s[this.state],this.view.render(),this.$el.append(this.view.$el))},empty:function(){return this.view&&(this.view.remove(),this.view=this.state=null),this},remove:function(){this.empty()}};var i=f.ViewKit=f.View.extend({_vk:function(){return this.__vk||(this.__vk=[])},replaceSubview:function(a,c){return this.addLayout(a).render(),b(this,c).replaceWith(a.$el),a},appendSubview:function(a,c){return this.addLayout(a).render(),b(this,c).append(a.$el),a},addLayout:function(b){return a(b)&&this._vk().push(b),b},removeLayout:function(a){var b=this._vk();if(a){var c=h.indexOf(b,a);h.isFunction(a.remove)&&a.remove(),c>=0&&b.splice(c,1)}else h.invoke(b,"remove"),b.length=0;return this},remove:function(){var a=f.View.prototype.remove.apply(this,arguments);return this.removeLayout(),a}}),j={createRegion:c,createList:d};return h.each(j,function(a,c){i[c]=function(b){return new a(b)},i.prototype[c]=function(a){var d=b(this,a);return this.addLayout(i[c](d))}}),i.mixin=function(a){if(a&&!isView(a))throw"ViewKit must extend a Backbone View class";a=a||{};for(var b in this.prototype)this.prototype.hasOwnProperty(b)&&(a[b]=this.prototype[b]);return a},i}).call(this);
//# sourceMappingURL=backbone.viewkit.min.map