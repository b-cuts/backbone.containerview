// Backbone.ViewKit 0.0.0
// (c) 2014 Greg MacWilliam
// Freely distributed under the MIT license

(function(){function a(a){return a instanceof g.View}function b(a){return a instanceof g.Collection}function c(a,b){return b?b instanceof h?b:i.isString(b)?a.$(b):h(b):a.$el}function d(a){this.$el=h(a).empty()}function e(a){this.$el=h(a).empty(),this.views=[]}var f=this,g=f.Backbone,h=f.jQuery||f.$,i=f._;d.prototype={state:null,view:null,open:function(b,c){return this.close(),this.state=c||null,a(b)?(b.render(),this.view=b,this.$el.append(b.$el)):this.$el.html(String(b)),this},close:function(){return this.view&&(this.view.remove(),this.view=null,this.state=null),this},remove:function(){return this.close(),this.$el=null,this}},e.prototype={models:null,views:null,viewClass:null,filter:function(){return!0},isLoading:function(){return this.models&&i.isFunction(this.models.isLoading)&&this.models.isLoading()},sort:null,render:function(a,c,d){this.empty();var e=document.createDocumentFragment();return a&&(this.models=a=b(a)?a.models.slice():a.slice()),c&&(this.viewClass=b(a)?a.models.slice():a.slice()),i.isFunction(d)||(d=this.filter),collection.each(function(a,b){if(d(a,b)){var f=new c({model:a});this.views.push(f),f.render(),e.appendChild(f.el)}},this),this.$el.append(e),this},append:function(a){return a.render(),this.views.push(a),this.$el.append(a.$el),this},empty:function(){return this.$el.empty(),i.invoke(this.views,"remove"),this.views.length=0,this},remove:function(){return this.empty(),this.$el=this.models=this.views=this.viewClass=null,this}};var j=g.ViewKit=g.View.extend({_vk:function(){return this.__vk||(this.__vk=[])},createRegion:function(a){var b=c(this,a);return this.addLayout(j.createRegion(b))},createList:function(a){var b=c(this,a);return this.addLayout(j.createList(b))},replaceSubview:function(a,b){return this.addLayout(a).render(),c(this,b).replaceWith(a.$el),a},appendSubview:function(a,b){return this.addLayout(a).render(),c(this,b).append(a.$el),a},addLayout:function(a){if(!i.isFunction(a.remove))throw'Added layouts require a "remove" method';return this._vk().push(a),a},removeLayout:function(a){var b=this._vk();if(a){var c=i.indexOf(b,a);i.isFunction(a.remove)&&a.remove(),c>=0&&b.splice(c,1)}else i.invoke(b,"remove"),b.length=0;return this},remove:function(){var a=g.View.prototype.remove.apply(this,arguments);return this.removeLayout(),a}});return j.createRegion=function(a){return new d(a)},j.createList=function(a){return new e(a)},j.mixin=function(b){if(b&&!a(b))throw"ViewKit must extend a Backbone View class";b=b||{};for(var c in this.prototype)this.prototype.hasOwnProperty(c)&&(b[c]=this.prototype[c]);return b},j}).call(this);
//# sourceMappingURL=backbone.viewkit.min.map